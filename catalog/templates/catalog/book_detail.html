{% extends "base_generic.html" %}

{% block content %}
  <h1>{{ book.title }}</h1>
  <p><strong>Author:</strong> {{ book.author }}</p>
  <p><strong>Summary:</strong> {{ book.summary }}</p>
  <p><strong>ISBN:</strong> {{ book.isbn }}</p>
  <p><strong>Genre:</strong> 
    {% for genre in book.genre.all %}
      {{ genre.name }}{% if not forloop.last %}, {% endif %}
    {% endfor %}
  </p>

  <h2>Book Instances</h2>
  <p>
    <a href="{% url 'bookinstance-create' %}?book={{ book.pk }}" class="btn btn-primary">Add Instance</a>
  </p>

  {% if book.bookinstance_set.exists %}
  <table class="table">
      <thead>
          <tr>
              <th>Imprint</th>
              <th>Due Back</th>
              <th>Status</th>
              <th>Borrower</th>
              <th>Actions</th>
          </tr>
      </thead>
      <tbody>
          {% for bookinstance in book.bookinstance_set.all %}
          <tr>
              <td>{{ bookinstance.imprint }}</td>
              <td>
                  <span class="{% if bookinstance.is_overdue %}text-danger{% endif %}">
                      {{ bookinstance.due_back }}
                  </span>
              </td>
              <td>{{ bookinstance.get_status_display }}</td>
              <td>{{ bookinstance.borrower }}</td>
              <td>
                  <a href="{% url 'bookinstance-update' bookinstance.pk %}" class="btn btn-warning btn-sm">Edit</a>
                  <a href="{% url 'bookinstance-delete' bookinstance.pk %}" class="btn btn-danger btn-sm">Delete</a>
              </td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
  {% else %}
  <p>No book instances available.</p>
  {% endif %}

{% endblock %}
